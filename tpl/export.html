{*<!--CitizenAir is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

CitizenAir is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with CitizenAir.  If not, see <http://www.gnu.org/licenses/>.-->
*}
{include="header"}
<main>
    <form method="get" action="api.php">
        <fieldset id="exportFormMeasurements">
            <legend>Mesures</legend>
            <div>
                <p>
                    Capteur&nbsp;:
                </p>
                <p class="scroll">
                    {loop="$api_keys"}
                        <input type="checkbox" id="sensor_{function="htmlspecialchars($value['name'])"}" name="sensor[]" value="{function="htmlspecialchars($value['name'])"}" checked="checked"/><label for="sensor_{function="htmlspecialchars($value['name'])"}">{function="htmlspecialchars($value['name'])"}</label><br/>
                    {/loop}
                </p>
            </div>
            <div>
                <p>Type&nbsp;: </p>
                <p class="scroll">
                    {loop="$types"}
                        <input type="checkbox" id="type_{function="htmlspecialchars($key)"}" name="type[]" value="{function="htmlspecialchars($key)"}" checked="checked"/><label for="type_{function="htmlspecialchars($key)"}">{function="htmlspecialchars($key)"}</label><br/>
                    {/loop}
                </p>
            </div>
        </fieldset>
        <fieldset>
            <legend>Localisation</legend>
            <p><label for="time_min">Daté entre le </label> <input type="text" name="time_min" id="time_min"/><label for="time_max"> et le </label><input type="text" name="time_max" id="time_max"/><br/>
            (format <a href="https://fr.wikipedia.org/wiki/Heure_Unix">timestamp Unix</a>)</p>
            <div id="time_min_picker" class="cal"></div>
            <div id="time_max_picker" class="cal"></div>
            <p><label for="lat_min">Latitude entre </label> <input type="text" name="lat_min" id="lat_min"/><label for="lat_max"> et </label><input type="text" name="lat_max" id="lat_max"/></p>
            <p><label for="long_min">Longitude entre </label> <input type="text" name="long_min" id="long_min"/><label for="long_max"> et </label><input type="text" name="long_max" id="long_max"/></p>
        </fieldset>
        <fieldset>
            <legend>Options</legend>
            <p><label for="format">Format&nbsp;: </label><select name="format" id="format"><option value="csv">CSV</option><option value="json" selected>JSON</option></select></p>
            <p><label for="visu">Inclure les données pour la visualisation ? </label><select name="visu" id="visu"><option value="0">Non</option><option value="1" selected>Oui</option></select></p>
        </fieldset>
        <p class="center"><input type="submit" value="Exporter"/><input type="hidden" name="do" value="get"/></p>
    </form>
    <p><em>Note&nbsp;:</em> Tous les champs sont optionnels et ne servent qu'à restreindre les résultats.</p>
    <p class="black_links">Les données des capteurs téléchargeables au format <a href="https://fr.wikipedia.org/wiki/JSON">JSON</a> et <a href="https://fr.wikipedia.org/wiki/Comma-separated_values">CSV</a> sont sous licence <a href="http://opendatacommons.org/licenses/by/">Open Data Commons By</a>.</p>
</main>
<script type="text/javascript">
[].forEach.call(document.querySelectorAll('select[multiple=multiple] option'), function (el) {
        el.addEventListener('click', function (e) {
            e.preventDefault();
            return false;
            });
});
</script>
{include="footer"}
